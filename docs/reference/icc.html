<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Intraclass Correlation Coefficient (ICC) — icc • performance</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Intraclass Correlation Coefficient (ICC) — icc" />
<meta property="og:description" content="This function calculates the intraclass-correlation coefficient
 (ICC) - sometimes also called variance partition coefficient
 (VPC) - for mixed effects models. The ICC is calculated for merMod
 (lme4), glmmTMB (glmmTMB), MixMod (GLMMadpative),
 lme (nlme), mixed (afex), and stanreg
 (rstanarm) objects. For models fitted with the brms-package,
 a variance decomposition based on the posterior predictive distribution
 is calculated (see 'Details')." />
<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">performance</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/r2.html">R-squared (R2)</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Intraclass Correlation Coefficient (ICC)</h1>
    
    <div class="hidden name"><code>icc.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function calculates the intraclass-correlation coefficient
 (ICC) - sometimes also called <em>variance partition coefficient</em>
 (VPC) - for mixed effects models. The ICC is calculated for <code>merMod</code>
 (<span class="pkg">lme4</span>), <code>glmmTMB</code> (<span class="pkg">glmmTMB</span>), <code>MixMod</code> (<span class="pkg">GLMMadpative</span>),
 <code>lme</code> (<span class="pkg">nlme</span>), <code>mixed</code> (<span class="pkg">afex</span>), and <code>stanreg</code>
 (<span class="pkg">rstanarm</span>) objects. For models fitted with the <span class="pkg">brms</span>-package,
 a variance decomposition based on the posterior predictive distribution
 is calculated (see 'Details').</p>
    </div>

    <pre class="usage"><span class='fu'>icc</span>(<span class='no'>model</span>, <span class='no'>...</span>)

<span class='co'># S3 method for brmsfit</span>
<span class='fu'>icc</span>(<span class='no'>model</span>, <span class='kw'>re.form</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>robust</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>ci</span> <span class='kw'>=</span> <span class='fl'>0.95</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>model</th>
      <td><p>A mixed effects model of class <code>merMod</code>, <code>glmmTMB</code>,
<code>MixMod</code>, <code>lme</code>, <code>mixed</code>, <code>stanreg</code> or <code>brmsfit</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Currently not used.</p></td>
    </tr>
    <tr>
      <th>re.form</th>
      <td><p>Formula containing group-level effects to be considered in
the prediction. If <code>NULL</code> (default), include all group-level effects.
Else, for instance for nested models, name a specific group-level effect
to calculate the variance decomposition for this group-level.</p></td>
    </tr>
    <tr>
      <th>robust</th>
      <td><p>Logical, if <code>TRUE</code>, the median instead of mean is used to
calculate the central tendency of the variances.</p></td>
    </tr>
    <tr>
      <th>ci</th>
      <td><p>The Credible Interval level.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list with two values, the adjusted and conditional ICC. For models
  of class <code>brmsfit</code>, a list with two values, the decomposed ICC as well
  as the credible intervals for this ICC.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    
<h3>Interpretation</h3>
<p>The ICC can be interpreted as &#8220;the proportion of the variance explained
 by the grouping structure in the population&#8221;. This index goes from 0, if the
 grouping conveys no information, to 1, if all observations in a group are
 identical (Gelman \&amp; Hill, 2007, p. 258). In other word, the ICC
 &#8220;can also be interpreted as the expected correlation between two
 randomly drawn units that are in the same group&#8221; <cite>(Hox 2010: 15)</cite>,
 altough this definition might not apply to mixed models with more complex
 random effects structures.</p><p></p><h3>Calculation</h3>
<p>The ICC is calculated by dividing the random effect variance,
 &sigma;<sup>2</sup><sub>i</sub>, by
 the total variance, i.e. the sum of the random effect variance and the
 residual variance, &sigma;<sup>2</sup><sub>&epsilon;</sub>.</p><p></p><h3>Adjusted and conditional ICC</h3>
<p><code>icc()</code> calculates an adjusted and conditional ICC, which both take
 all sources of uncertainty (i.e. of <em>all random effects</em>) into account. While
 the <em>adjusted ICC</em> only relates to the random effects, the <em>conditional ICC</em>
 also takes the fixed effects variances into account (see <cite>Nakagawa et al. 2017</cite>).
 Typically, the <em>adjusted</em> ICC is of interest when the analysis of random
 effects is of interest. <code>icc()</code> returns a meaningful ICC also for more
 complex random effects structures, like models with random slopes or nested
 design (more than two levels) and is applicable for models with other distributions
 than Gaussian. For more details on the computation of the variances, see
 <code><a href='https://rdrr.io/pkg/insight/man/get_variance.html'>get_variance</a></code>.</p><p></p><h3>ICC for unconditional and conditional models</h3>
<p>Usually, the ICC is calculated for the null model ("unconditional model").
 However, according to <cite>Raudenbush and Bryk (2002)</cite> or
 <cite>Rabe-Hesketh and Skrondal (2012)</cite> it is also feasible to compute the ICC
 for full models with covariates ("conditional models") and compare how
 much, e.g., a level-2 variable explains the portion of variation in the grouping
 structure (random intercept).</p><p></p><h3>ICC for specific group-levels</h3>
<p>The proportion of variance for specific levels related to  each other
 (e.g., similarity of level-1-units within level-2-units or level-2-units
 within level-3-units) must be calculated manually. Use <code><a href='https://rdrr.io/pkg/insight/man/get_variance.html'>get_variance</a></code>
 to get the random intercept variances (between-group-variances) and residual
 variance of the model, and calculate the ICC for the various level correlations.
 <br /> <br />
 For example, for the ICC between level 1 and 2: <br />
 <code>sum(insight::get_variance_intercept(model)) /</code> <br />
 <code>  (sum(insight::get_variance_intercept(model)) + insight::get_variance_residual(model))</code>
 <br /> <br />
 For for the ICC between level 2 and 3: <br />
 <code>insight::get_variance_intercept(model)[2] /</code> <br />
 <code><a href='https://rdrr.io/r/base/sum.html'>  sum(insight::get_variance_intercept(model))</a></code></p><p></p><h3>ICC for brms-models</h3>
<p>If <code>model</code> is of class <code>brmsfit</code>, <code>icc()</code> calculates a
 variance decomposition based on the posterior predictive distribution. In
 this case, first, the draws from the posterior predictive distribution
 <em>not conditioned</em> on group-level terms (<code>posterior_predict(..., re.form = NA)</code>)
 are calculated as well as draws from this distribution <em>conditioned</em>
 on <em>all random effects</em> (by default, unless specified else in <code>re.form</code>)
 are taken. Then, second, the variances for each of these draws are calculated.
 The "ICC" is then the ratio between these two variances. This is the recommended
 way to analyse random-effect-variances for non-Gaussian models. It is then possible
 to compare variances across models, also by specifying different group-level
 terms via the <code>re.form</code>-argument.
 <br /> <br />
 Sometimes, when the variance of the posterior predictive distribution is
 very large, the variance ratio in the output makes no sense, e.g. because
 it is negative. In such cases, it might help to use <code>robust = TRUE</code>.</p>

    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    
<ul>
<li><p>Hox, J. J. (2010). Multilevel analysis: techniques and applications (2nd ed). New York: Routledge.</p></li>
<li><p>Nakagawa, S., Johnson, P. C. D., &amp; Schielzeth, H. (2017). The coefficient of determination R2 and intra-class correlation coefficient from generalized linear mixed-effects models revisited and expanded. Journal of The Royal Society Interface, 14(134), 20170213. doi: <a href='https://doi.org/10.1098/rsif.2017.0213'>10.1098/rsif.2017.0213</a></p></li>
<li><p>Rabe-Hesketh, S., &amp; Skrondal, A. (2012). Multilevel and longitudinal modeling using Stata (3rd ed). College Station, Tex: Stata Press Publication.</p></li>
<li><p>Raudenbush, S. W., &amp; Bryk, A. S. (2002). Hierarchical linear models: applications and data analysis methods (2nd ed). Thousand Oaks: Sage Publications.</p></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>lme4</span>)
<span class='no'>model</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>lme4</span><span class='kw ns'>::</span><span class='fu'><a href='https://rdrr.io/pkg/lme4/man/lmer.html'>lmer</a></span>(<span class='no'>Sepal.Length</span> ~ <span class='no'>Petal.Length</span> + (<span class='fl'>1</span> <span class='kw'>|</span> <span class='no'>Species</span>), <span class='kw'>data</span> <span class='kw'>=</span> <span class='no'>iris</span>)
<span class='fu'>icc</span>(<span class='no'>model</span>)</div><div class='output co'>#&gt; <span style='color: #0000BB;'># Intraclass Correlation Coefficient
#&gt; 
#&gt; </span><span>     Adjusted ICC: 0.910
#&gt;   Conditional ICC: 0.311</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      <li><a href="#value">Value</a></li>
      <li><a href="#details">Details</a></li>
      <li><a href="#references">References</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/strengejacke'>Daniel Lüdecke</a>, <a href='https://dominiquemakowski.github.io/'>Dominique Makowski</a>, Philip Waggoner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


